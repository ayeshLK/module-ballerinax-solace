#!/usr/bin/cli

# Solace PubSub+ Broker SSL/TLS Configuration
# This script configures SSL/TLS support for testing

enable
configure

# Configure server certificate
ssl server-certificate server
shutdown
certificate-file /etc/solace/certs/server-cert.pem
private-key-file /etc/solace/certs/server-key.pem
no shutdown
exit

# Enable SSL on the message VPN
message-vpn default
ssl
shutdown
server-certificate-name server
no shutdown
exit

# Enable client certificate verification
authentication
client-certificate
shutdown
allow-api-provided-username
validate-certificate-date
no shutdown
exit
exit

# Configure SMF service with SSL
service smf
shutdown
ssl
port 55443
server-certificate-name server
shutdown
no shutdown
exit
no shutdown
exit

# Configure message spool for guaranteed messaging
hardware
message-spool
shutdown
max-spool-usage 1000
no shutdown
exit
exit

end
exit
